{"ast":null,"code":"import _regeneratorRuntime from\"/Users/markhustad/Desktop/Javascript/Udacity/reactnanodegree/MyReads-Udacity/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/markhustad/Desktop/Javascript/Udacity/reactnanodegree/MyReads-Udacity/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/markhustad/Desktop/Javascript/Udacity/reactnanodegree/MyReads-Udacity/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';import{useState}from'react';import*as BooksAPI from\"../BooksAPI\";import Book from'./Book';import{Link}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Search=function Search(_ref){var books=_ref.books,updateBook=_ref.updateBook,setBooks=_ref.setBooks;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),query=_useState2[0],setQuery=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),booksArr=_useState4[0],getBooks=_useState4[1];var updateSearch=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(query){var res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setQuery(query);if(!(query!=='')){_context.next=5;break;}_context.next=4;return BooksAPI.search(query,5).then(function(res){if(Array.isArray(res)){res.forEach(function(book){books.forEach(function(bk){if(book.id===bk.id){book.shelf=bk.shelf;}if(!book.shelf){book.shelf=\"none\";}});});getBooks(res.filter(function(book){return book.authors!==undefined&&book.imageLinks!==undefined;}));}else{getBooks([]);}}).catch(function(err){console.log(err);});case 4:res=_context.sent;case 5:case\"end\":return _context.stop();}}},_callee);}));return function updateSearch(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"search-books\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"search-books-bar\",children:[/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"close-search\"}),/*#__PURE__*/_jsx(\"div\",{className:\"search-books-input-wrapper\",children:/*#__PURE__*/_jsx(\"input\",{className:\"search-input\",type:\"text\",placeholder:\"Search by title, author, or ISBN\",value:query,onChange:function onChange(event){return updateSearch(event.target.value);}})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"search-books-results\",children:/*#__PURE__*/_jsx(\"ol\",{className:\"books-grid\",children:booksArr.length?booksArr.map(function(book){return/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Book,{book:book,updateBook:updateBook})},book.id);}):/*#__PURE__*/_jsx(\"h1\",{className:\"no-results\",children:\"No Results\"})})})]});};export default Search;","map":{"version":3,"names":["React","useState","BooksAPI","Book","Link","Search","books","updateBook","setBooks","query","setQuery","booksArr","getBooks","updateSearch","search","then","res","Array","isArray","forEach","book","bk","id","shelf","filter","authors","undefined","imageLinks","catch","err","console","log","event","target","value","length","map"],"sources":["/Users/markhustad/Desktop/Javascript/Udacity/reactnanodegree/MyReads-Udacity/src/components/Search.js"],"sourcesContent":["import React from 'react'\nimport { useState } from 'react';\nimport * as BooksAPI from \"../BooksAPI\";\nimport Book from './Book';\nimport { Link } from 'react-router-dom';\nimport PropTypes from 'prop-types';\n\nconst Search = ({ books, updateBook, setBooks }) => {\n  const [query, setQuery] = useState(\"\");\n  const [booksArr, getBooks] = useState([]);\n\n  const updateSearch = async (query) => {\n    setQuery(query);\n    if(query !== '') {\n      const res = await BooksAPI.search(query, 5)\n      .then((res) => {\n        if (Array.isArray(res)) {\n          res.forEach((book) => {\n            books.forEach((bk) => {\n              if (book.id === bk.id) {\n                  book.shelf = bk.shelf;\n              } if (!book.shelf) {\n                book.shelf = \"none\";\n              }\n            });\n          });\n          getBooks(\n            res.filter(\n              (book) => book.authors !== undefined && book.imageLinks !== undefined\n            )\n          );\n        } else {\n          getBooks([])\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n      })\n    }\n  }\n\n  return (\n    <div className=\"search-books\">\n      <div className=\"search-books-bar\">\n      <Link to=\"/\" className=\"close-search\"></Link>\n        <div className=\"search-books-input-wrapper\">\n          <input className=\"search-input\"\n            type=\"text\"\n            placeholder=\"Search by title, author, or ISBN\"\n            value={query}\n            onChange={(event) => updateSearch(event.target.value)}\n          />\n        </div>\n      </div>\n      <div className=\"search-books-results\">\n        <ol className=\"books-grid\">\n          { booksArr.length ? (booksArr.map((book) => {\n            return (\n            <li key={book.id}>\n              <Book book={book} updateBook={updateBook}/>\n            </li>\n            )\n          })\n          ) : (\n            <h1 className='no-results'>No Results</h1>\n          )}\n        </ol>\n      </div>\n    </div>\n  )\n}\n\nSearch.propTypes = {\n  updateSearch: PropTypes.func\n}\n\nexport default Search"],"mappings":"sfAAA,MAAOA,MAAP,KAAkB,OAAlB,CACA,OAASC,QAAT,KAAyB,OAAzB,CACA,MAAO,GAAKC,SAAZ,KAA0B,aAA1B,CACA,MAAOC,KAAP,KAAiB,QAAjB,CACA,OAASC,IAAT,KAAqB,kBAArB,C,wFAGA,GAAMC,OAAM,CAAG,QAATA,OAAS,MAAqC,IAAlCC,MAAkC,MAAlCA,KAAkC,CAA3BC,UAA2B,MAA3BA,UAA2B,CAAfC,QAAe,MAAfA,QAAe,CAClD,cAA0BP,QAAQ,CAAC,EAAD,CAAlC,wCAAOQ,KAAP,eAAcC,QAAd,eACA,eAA6BT,QAAQ,CAAC,EAAD,CAArC,yCAAOU,QAAP,eAAiBC,QAAjB,eAEA,GAAMC,aAAY,6FAAG,iBAAOJ,KAAP,4HACnBC,QAAQ,CAACD,KAAD,CAAR,CADmB,KAEhBA,KAAK,GAAK,EAFM,gDAGCP,SAAQ,CAACY,MAAT,CAAgBL,KAAhB,CAAuB,CAAvB,EACjBM,IADiB,CACZ,SAACC,GAAD,CAAS,CACb,GAAIC,KAAK,CAACC,OAAN,CAAcF,GAAd,CAAJ,CAAwB,CACtBA,GAAG,CAACG,OAAJ,CAAY,SAACC,IAAD,CAAU,CACpBd,KAAK,CAACa,OAAN,CAAc,SAACE,EAAD,CAAQ,CACpB,GAAID,IAAI,CAACE,EAAL,GAAYD,EAAE,CAACC,EAAnB,CAAuB,CACnBF,IAAI,CAACG,KAAL,CAAaF,EAAE,CAACE,KAAhB,CACH,CAAC,GAAI,CAACH,IAAI,CAACG,KAAV,CAAiB,CACjBH,IAAI,CAACG,KAAL,CAAa,MAAb,CACD,CACF,CAND,EAOD,CARD,EASAX,QAAQ,CACNI,GAAG,CAACQ,MAAJ,CACE,SAACJ,IAAD,QAAUA,KAAI,CAACK,OAAL,GAAiBC,SAAjB,EAA8BN,IAAI,CAACO,UAAL,GAAoBD,SAA5D,EADF,CADM,CAAR,CAKD,CAfD,IAeO,CACLd,QAAQ,CAAC,EAAD,CAAR,CACD,CACF,CApBiB,EAqBjBgB,KArBiB,CAqBX,SAACC,GAAD,CAAS,CACdC,OAAO,CAACC,GAAR,CAAYF,GAAZ,EACD,CAvBiB,CAHD,QAGXb,GAHW,qEAAH,kBAAZH,aAAY,6CAAlB,CA8BA,mBACE,aAAK,SAAS,CAAC,cAAf,wBACE,aAAK,SAAS,CAAC,kBAAf,wBACA,KAAC,IAAD,EAAM,EAAE,CAAC,GAAT,CAAa,SAAS,CAAC,cAAvB,EADA,cAEE,YAAK,SAAS,CAAC,4BAAf,uBACE,cAAO,SAAS,CAAC,cAAjB,CACE,IAAI,CAAC,MADP,CAEE,WAAW,CAAC,kCAFd,CAGE,KAAK,CAAEJ,KAHT,CAIE,QAAQ,CAAE,kBAACuB,KAAD,QAAWnB,aAAY,CAACmB,KAAK,CAACC,MAAN,CAAaC,KAAd,CAAvB,EAJZ,EADF,EAFF,GADF,cAYE,YAAK,SAAS,CAAC,sBAAf,uBACE,WAAI,SAAS,CAAC,YAAd,UACIvB,QAAQ,CAACwB,MAAT,CAAmBxB,QAAQ,CAACyB,GAAT,CAAa,SAAChB,IAAD,CAAU,CAC1C,mBACA,iCACE,KAAC,IAAD,EAAM,IAAI,CAAEA,IAAZ,CAAkB,UAAU,CAAEb,UAA9B,EADF,EAASa,IAAI,CAACE,EAAd,CADA,CAKD,CANoB,CAAnB,cAQA,WAAI,SAAS,CAAC,YAAd,wBATJ,EADF,EAZF,GADF,CA6BD,CA/DD,CAqEA,cAAejB,OAAf"},"metadata":{},"sourceType":"module"}